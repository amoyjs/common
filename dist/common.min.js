!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).common={})}(this,function(e){"use strict";function p(e){var n,t,r={},o=r.toString,i=r.hasOwnProperty,a=i.toString,c=a.call(Object);return e&&"[object Object]"===o.call(e)&&(!(n=Object.getPrototypeOf(e))||"function"==typeof(t=i.call(n,"constructor")&&n.constructor)&&a.call(t)===c)}var f,s;function u(e){var n={},t=n.toString.call(e);return null==e?e+"":("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" ").forEach(function(e){n["[object "+e+"]"]=e.toLowerCase()}),"object"==typeof e||"function"==typeof e?n[t]||"object":typeof e)}e.eventify=function(r){return r.callbacks={},r.on=function(e,n){return e&&n&&(r.hasOwnProperty("callbacks")||r.callbacks||(r.callbacks={}),e.split(" ").map(function(e){(t=r.callbacks)[e]||(t[e]=[]),r.callbacks[e].push(n)})),r;var t},r.emit=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.shift().split(" ").map(function(e){var n=null!==r.callbacks&&r.callbacks[e]||[];n.length&&n.map(function(e){e&&e.apply(r,t)})}),r},r.off=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 0===e.length?r.callbacks={}:e.shift().split(" ").map(function(e){return delete r.callbacks[e]}),r},r},e.extend=function e(){for(var n,t,r,o,i,a,c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];var f=arguments[0]||{},s=1,u=arguments.length,d=!1;for("boolean"==typeof f&&(d=f,f=arguments[s]||{},s++),"object"!=typeof f&&"function"!=typeof f&&(f={}),s===u&&(f=this,s--);s<u;s++)if(null!==(n=arguments[s]))for(t in n)if(n.hasOwnProperty(t)){if(i=f[t],f===(o=n[t]))continue;d&&o&&(p(o)||(a=Array.isArray(o)))?(r=a?(a=!1,i&&Array.isArray(i)?i:[]):i&&p(i)?i:{},f[t]=e(d,r,o)):void 0!==o&&(f[t]=o)}return f},e.forin=function(e,n){if("object"==typeof e)for(var t in e){e.hasOwnProperty(t)&&n(t,e[t])}},e.getValue=function(e,n){if("object"!==u(e))return e;for(var t=e,r=n.split("."),o=0,i=r.length;o<i;o++){var a=r[o];if(a){if(!t[a]){t=void 0;break}t=t[a]}}return t},e.setValue=function(e,n,t){if("object"!==u(e))throw new Error("setValue tar muse be a object!");var r=n.trim().indexOf(".");if(0<r&&r<n.length-1){for(var o=n.trim().split("."),i=e,a="",c=0,l=o.length-1;c<l;c++){var f=o[c];"object"==typeof i[f]?i=i[f]:void 0===i[f]&&(a=f)}if(a)throw new Error("the key("+a+") is not in tar obj!");i[o[o.length-1]]=t}else e[n.replace(/\./g,"")]=t},e.showPerformancePannel=function(e,n){void 0===n&&(n=["fps","draw-calls"]);var t,r,o,i=n.includes("fps"),a=n.includes("draw-calls");a&&function(e){var t=0;e.renderer.addListener("prerender",function(){t=0}),e.renderer.addListener("postrender",function(){f=t});var r=e.renderer.gl.drawElements.bind(e.renderer.gl);e.renderer.gl.drawElements=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t++,r.apply(void 0,e)}}(e),i&&(t=performance.now(),r=0,(o=function(){var e=performance.now();r++,1e3+t<=e&&(s=Math.round(1e3*r/(e-t)),r=0,t=e),requestAnimationFrame(o)})()),function(e,n){var t=document.createElement("div");t.id="stats",t.style.cssText="position:fixed;\n        left: 3rem;\n        pointer-events: none;\n        user-select: none;\n        z-index:10000;\n        color: #fff;\n        font-size: 3rem;\n        line-height: 3rem;",t.innerHTML=(e?"<p id='fps'>fps:</p>":"")+(n?"<p id='drawcalls'>drawCalls:</p>":""),document.body.appendChild(t);var r=document.querySelector("#stats"),o=window.innerHeight-(r?r.clientHeight:0);t.style.top=o-10+"px"}(i,a);var c=document.querySelector("#drawcalls"),l=document.querySelector("#fps");setInterval(function(){f&&c&&(c.innerHTML="drawCalls: "+f),s&&l&&(l.innerHTML="fps: "+s)},200),window.addEventListener("resize",function(){var n;n=document.querySelector("#stats"),setTimeout(function(){var e=document.getElementById("stats");e&&(e.style.top=window.innerHeight-(n?n.clientHeight:0)-10+"px")},100)})},e.type=u,e.usesify=function(t){return function(n){(Array.isArray(t)?t:[t]).map(function(e){if("function"!=typeof e)throw Error("[@amoy/components]error: addon "+t+" must be a function;");e(n)})}},Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=common.min.js.map
