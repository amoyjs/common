{"version":3,"file":"common.js","sources":["../lib/eventify.ts","../lib/extend.ts","../lib/usesify.ts","../lib/index.ts"],"sourcesContent":["export function eventify(target: any) {\n    target.callbacks = {}\n\n    target.on = (eventName: string, callback: () => void) => {\n        if (!eventName || !callback) return target\n        if (!target.hasOwnProperty(\"callbacks\")) target.callbacks || (target.callbacks = {})\n\n        let base: any\n        const events = eventName.split(\" \")\n        events.map((eventName) => {\n            (base = target.callbacks)[eventName] || (base[eventName] = [])\n            target.callbacks[eventName].push(callback)\n        })\n\n        return target\n    }\n\n    target.emit = (...args: any) => {\n        const eventName = args.shift() as string\n        const events = eventName.split(\" \")\n        events.map((eventName) => {\n            const list = target.callbacks !== null ? target.callbacks[eventName] || [] : []\n            if (list.length) {\n                list.map((item: () => void) => {\n                    item && item.apply(target, args)\n                })\n            }\n        })\n\n        return target\n    }\n\n    target.off = (...args: any) => {\n        if (args.length === 0) {\n            target.callbacks = {}\n        } else {\n            const eventName = args.shift() as string\n            const events = eventName.split(\" \")\n            events.map((eventName) => delete target.callbacks[eventName])\n        }\n\n        return target\n    }\n\n    return target\n}\n","function isPlainObject(object) {\n    // tslint:disable-next-line: one-variable-per-declaration\n    let proto,\n        ctor,\n        class2type = {},\n        toString = class2type.toString, // Object.prototype.toString\n        hasOwn = class2type.hasOwnProperty,\n        fnToString = hasOwn.toString, // Object.toString/Function.toString\n        ObjectFunctionString = fnToString.call(Object) // 'function Object() { [native code] }'\n\n    if (!object || toString.call(object) !== '[object Object]') {\n        return false\n    }\n\n    // According to the object created by `Object.create(null)` is no `prototype`\n    proto = Object.getPrototypeOf(object)\n    if (!proto) {\n        return true\n    }\n\n    ctor = hasOwn.call(proto, 'constructor') && proto.constructor\n    return typeof ctor === 'function' && fnToString.call(ctor) === ObjectFunctionString\n}\n\nexport function extend(this: any, ...args) {\n    let options\n    let name\n    let clone\n    let copy\n    let source\n    let copyIsArray\n    let target = arguments[0] || {}\n    let i = 1\n    let length = arguments.length\n    let deep = false\n\n    if (typeof target === 'boolean') {\n        deep = target\n        target = arguments[i] || {}\n        i++\n    }\n\n    if (typeof target !== 'object' && typeof target !== 'function') {\n        target = {}\n    }\n\n    if (i === length) {\n        target = this\n        i--\n    }\n\n    for (; i < length; i++) {\n        // tslint:disable-next-line: no-conditional-assignment\n        if ((options = arguments[i]) !== null) {\n            for (name in options) {\n                if (options.hasOwnProperty(name)) {\n                    source = target[name]\n                    copy = options[name]\n\n                    if (target === copy) {\n                        continue\n                    }\n\n                    // deep clone\n                    // tslint:disable-next-line: no-conditional-assignment\n                    if (deep && copy && (isPlainObject(copy) || (copyIsArray = Array.isArray(copy)))) {\n                        if (copyIsArray) {\n                            copyIsArray = false\n                            clone = source && Array.isArray(source) ? source : []\n                        } else {\n                            clone = source && isPlainObject(source) ? source : {}\n                        }\n\n                        target[name] = extend(deep, clone, copy)\n                    } else if (copy !== undefined) {\n                        target[name] = copy\n                    }\n                }\n            }\n        }\n    }\n\n    return target\n}\n","type addon = (core: any) => void\n\nexport function usesify(addons: addon | addon[]) {\n    return function use(target) {\n        const _addons = Array.isArray(addons) ? addons : [addons]\n        _addons.map((addon) => {\n            if (typeof addon === \"function\") {\n                addon(target)\n            } else {\n                throw Error(`[@amoy/components]error: addon ${addons} must be a function;`)\n            }\n        })\n    }\n}\n","export * from \"./eventify\"\nexport * from \"./extend\"\nexport * from \"./usesify\"\n\nexport function type(object: any) {\n    const class2type = {}\n    const type = class2type.toString.call(object)\n    const typeString = 'Boolean Number String Function Array Date RegExp Object Error Symbol'\n\n    if (object == null) return object + ''\n\n    typeString.split(' ').forEach((type) => {\n        class2type[`[object ${type}]`] = type.toLowerCase()\n    })\n\n    const isObject = typeof object === 'object'\n    const isFn = typeof object === 'function'\n    return isObject || isFn ? class2type[type] || 'object' : typeof object\n}\n\nexport function forin(object: object, fn: (key?: string, value?: any) => void) {\n    if (typeof object === 'object') {\n        for (const key in object) {\n            if (object.hasOwnProperty(key)) {\n                const value = object[key]\n                fn(key, value)\n            }\n        }\n    }\n}\n\nexport const getValue = (root: any, get: string) => {\n    if (type(root) !== 'object') return root\n    let value = root\n    const keyArr = get.split('.')\n    for (let i = 0, l = keyArr.length; i < l; i++) {\n        const v = keyArr[i]\n        if (v) {\n            if (value[v]) {\n                value = value[v]\n            } else {\n                value = undefined\n                break\n            }\n        }\n    }\n    return value\n}\n\nexport const setValue = (tar: any, key: string, value: any) => {\n    if (type(tar) !== 'object') {\n        throw new Error('setValue tar muse be a object!')\n    } else {\n        const pIndex = key.trim().indexOf('.')\n        if (pIndex > 0 && pIndex < key.length - 1) {\n            const keyArr = key.trim().split('.')\n            let _obj = tar\n            let wrongKey = ''\n            for (let i = 0, l = keyArr.length - 1; i < l; i++) {\n                const v = keyArr[i]\n                if (typeof _obj[v] === 'object') {\n                    _obj = _obj[v]\n                } else if (typeof _obj[v] === 'undefined') {\n                    wrongKey = v\n                }\n            }\n\n            if (!wrongKey) {\n                const lastKey = keyArr[keyArr.length - 1]\n                _obj[lastKey] = value\n            } else {\n                throw new Error(`the key(${wrongKey}) is not in tar obj!`)\n            }\n        } else {\n            tar[key.replace(/\\./g, '')] = value\n        }\n    }\n}\n"],"names":[],"mappings":"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"}